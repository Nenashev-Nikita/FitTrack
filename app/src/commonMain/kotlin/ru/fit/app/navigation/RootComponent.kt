package ru.fit.app.navigationimport com.arkivanov.decompose.ComponentContextimport com.arkivanov.decompose.router.stack.StackNavigationimport com.arkivanov.decompose.router.stack.childStackimport com.arkivanov.decompose.router.stack.pushimport com.arkivanov.essenty.parcelable.Parcelableimport com.arkivanov.essenty.parcelable.Parcelizeimport kotlinx.serialization.Serializableimport ru.fit.app.features.main.presentation.ExerciseComponentimport ru.fit.app.features.main.presentation.MainComponentimport ru.fit.app.features.main.presentation.ProgramComponentclass RootComponent(	componentContext: ComponentContext,	private val mainComponentFactory: (ComponentContext) -> MainComponent,	private val programComponentFactory: (ComponentContext) -> ProgramComponent,	private val exerciseComponentFactory: (ComponentContext) -> ExerciseComponent,) : ComponentContext by componentContext {	private val navigation = StackNavigation<Config>()	val childStack = childStack(		source = navigation,		initialConfiguration = Config.Main,		handleBackButton = true,		childFactory = ::createChild	)	private fun createChild(config: Config, context: ComponentContext): Child =		when (config) {			Config.Main     -> Child.Main(mainComponentFactory(context))			Config.Program  -> Child.Program(programComponentFactory(context))			Config.Exercise -> Child.Exercise(exerciseComponentFactory(context))		}	fun onTabClicked(config: Config) {		navigation.push(config)	}	sealed class Child {		data class Main(val component: MainComponent) : Child()		data class Program(val component: ProgramComponent) : Child()		data class Exercise(val component: ExerciseComponent) : Child()	}	@Parcelize	@Serializable	sealed class Config : Parcelable {		data object Main : Config()		data object Program : Config()		data object Exercise : Config()	}}